<div class="col-sm-12 form-section-title">
  Build method
</div>
<box-selector radio-name="method" ng-model="$ctrl.state.Method" options="$ctrl.methodOptions" on-change="($ctrl.onChangeMethod)"></box-selector>

<web-editor-form
  ng-if="$ctrl.state.Method === 'editor'"
  identifier="stack-creation-editor"
  value="$ctrl.formValues.StackFileContent"
  on-change="($ctrl.onChangeFileContent)"
  yml="true"
  placeholder="# Define or paste the content of your manifest here"
>
  <editor-description>
    <kube-deploy-description></kube-deploy-description>
  </editor-description>
</web-editor-form>

<file-upload-form ng-show="$ctrl.state.Method === 'upload'" file="$ctrl.formValues.StackFile" on-change="($ctrl.onChangeFile)">
  <file-upload-description>
    <kube-deploy-description></kube-deploy-description>
  </file-upload-description>
</file-upload-form>

<div ng-show="$ctrl.state.Method === 'repository'">
  <div class="col-sm-12 form-section-title">
    Git repository
  </div>
  <div class="form-group">
    <span class="col-sm-12 text-muted small">
      You can use the URL of a git repository.
    </span>
  </div>
  <div class="form-group">
    <label for="stack_repository_url" class="col-sm-2 control-label text-left">Repository URL</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" ng-model="$ctrl.formValues.RepositoryURL" id="stack_repository_url" placeholder="https://github.com/portainer/portainer-compose" />
    </div>
  </div>
  <div class="form-group">
    <span class="col-sm-12 text-muted small">
      Specify a reference of the repository using the following syntax: branches with
      <code>refs/heads/branch_name</code> or tags with <code>refs/tags/tag_name</code>. If not specified, will use the default <code>HEAD</code> reference normally the
      <code>master</code> branch.
    </span>
  </div>
  <div class="form-group">
    <label for="stack_repository_url" class="col-sm-2 control-label text-left">Repository reference</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" ng-model="$ctrl.formValues.RepositoryReferenceName" id="stack_repository_reference_name" placeholder="refs/heads/master" />
    </div>
  </div>
  <div class="form-group">
    <span class="col-sm-12 text-muted small">
      Indicate the path to the Manifest file from the root of your repository.
    </span>
  </div>
  <div class="form-group">
    <label for="stack_repository_path" class="col-sm-2 control-label text-left">Manifest path</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" ng-model="$ctrl.formValues.FilePathInRepository" id="stack_repository_path" placeholder="kubernetes-manifest.yml" />
    </div>
  </div>
  <div class="form-group">
    <div class="col-sm-12">
      <label class="control-label text-left">
        Authentication
      </label>
      <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="$ctrl.formValues.RepositoryAuthentication" /><i></i> </label>
    </div>
  </div>
  <div class="form-group" ng-if="$ctrl.formValues.RepositoryAuthentication">
    <span class="col-sm-12 text-muted small">
      If your git account has 2FA enabled, you may receive an
      <code>authentication required</code> error when deploying your stack. In this case, you will need to provide a personal-access token instead of your password.
    </span>
  </div>
  <div class="form-group" ng-if="$ctrl.formValues.RepositoryAuthentication">
    <label for="repository_username" class="col-sm-1 control-label text-left">Username</label>
    <div class="col-sm-11 col-md-5">
      <input type="text" class="form-control" ng-model="$ctrl.formValues.RepositoryUsername" name="repository_username" placeholder="myGitUser" />
    </div>
    <label for="repository_password" class="col-sm-1 control-label text-left">
      Password
    </label>
    <div class="col-sm-11 col-md-5">
      <input type="password" class="form-control" ng-model="$ctrl.formValues.RepositoryPassword" name="repository_password" placeholder="myPassword" />
    </div>
  </div>
</div>
<!-- !repository -->
